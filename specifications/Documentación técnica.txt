1. Nombre del Proyecto
Pide

2. VisiÃ³n General
Pide es una plataforma web responsive que digitaliza la gestiÃ³n de cartas y pedidos en establecimientos hosteleros (restaurantes, bares, cafeterÃ­as, etc.).
 A travÃ©s de cÃ³digos QR, los clientes acceden al menÃº digital personalizado de un establecimiento y pueden realizar pedidos y pagos sin necesidad de intervenciÃ³n del personal.
La plataforma incluye interfaces especÃ­ficas para clientes, empleados, administradores de restaurante y un administrador general de sistema.

3. PÃºblico objetivo
Clientes (sin necesidad de cuenta)


Empleados: camareros y cocineros


Administradores de establecimiento


Administrador general del sistema



4. Principales funcionalidades
4.1 Cliente (Frontend web sin login)
Acceso por QR: CÃ³digo Ãºnico que identifica el establecimiento y la ubicaciÃ³n (mesa o zona).


VisualizaciÃ³n de la carta: Con soporte para mÃºltiples idiomas, categorÃ­as, variantes, alÃ©rgenos, descripciones y precios.


CreaciÃ³n de pedidos: Pedidos en tiempo real vinculados a una mesa y a un cliente anÃ³nimo.


Pago opcional: Posibilidad de realizar pagos directamente desde el dispositivo (integraciÃ³n con TPV virtual o pasarela de pago).


Seguimiento de estado: ActualizaciÃ³n en tiempo real del estado del pedido.


GestiÃ³n parcial de pedidos: EdiciÃ³n/cancelaciÃ³n limitada antes de que el pedido sea procesado.



4.2 Empleado (Frontend autenticado)
Acceso:
Pantalla de login con autenticaciÃ³n basada en roles.


Funcionalidades:
Panel de pedidos en tiempo real: VisualizaciÃ³n de todos los pedidos en curso del establecimiento.


Filtros dinÃ¡micos: Por estado del pedido (pendiente, en preparaciÃ³n, listo, entregado) y categorÃ­a de producto.


GestiÃ³n de pedidos: Cambiar estado segÃºn responsabilidad (ej.: â€œen preparaciÃ³nâ€ para cocineros, â€œentregadoâ€ para camareros).


Detalles del pedido: VisualizaciÃ³n de productos, cantidades, notas del cliente, mesa o zona.


Perfil de usuario: EdiciÃ³n de nombre, imagen, y preferencias bÃ¡sicas.



4.3 Administrador de Establecimiento
Funcionalidades:
GestiÃ³n de empleados: Alta, modificaciÃ³n y baja de empleados, con asignaciÃ³n de rol (camarero o cocinero).


GestiÃ³n del menÃº: CreaciÃ³n, ediciÃ³n y eliminaciÃ³n de categorÃ­as, productos y variantes.


SupervisiÃ³n de pedidos: Acceso a vista de pedidos en tiempo real con mÃ©tricas de rendimiento.


Multiestablecimiento: Un mismo administrador puede gestionar varios restaurantes y sus respectivas cartas.



4.4 Administrador General (SÃºper Admin)
Funcionalidades:
GestiÃ³n de establecimientos: Crear nuevos establecimientos y asignar administradores.


Vista global: Panel de control con estadÃ­sticas agregadas por establecimiento.


AuditorÃ­a y trazabilidad: Opcional, permite revisar actividad en toda la plataforma.


Control total del sistema: Puede modificar cualquier entidad o configuraciÃ³n global.



5. Arquitectura TÃ©cnica
5.1 Frontend
Framework: Next.js (React)


Estilo: TailwindCSS


DiseÃ±o: Mobile-first, con soporte responsive para tablets y escritorio


InternacionalizaciÃ³n?


5.2 Backend
API: Next.js API Routes (RESTful)


ORM: Prisma


Base de datos: PostgreSQL


AutenticaciÃ³n: JWT con gestiÃ³n de sesiones
OAuth para google y apple



5.3 Infraestructura
Almacenamiento: Prisma + PostgreSQL (Escalable por establecimiento)


Escalabilidad: Multi-tenancy por establecimiento


Observabilidad: Logs detallados, auditorÃ­a opcional por rol y acciÃ³n


CI/CD: Preparado para integraciÃ³n continua en Vercel o entorno Dockerizado



He aÃ±adido comentarios estilo JSDoc con anotaciones Swagger. Si estÃ¡s utilizando Swagger o una herramienta similar para documentar tu API, esto podrÃ­a ser muy Ãºtil. Si no, puedes eliminarlos.

6. Modelo de Datos (resumen)
Entidad
DescripciÃ³n
User
Empleados y administradores con roles diferenciados
Establishment
Restaurantes con carta y configuraciÃ³n propia
Category
CategorÃ­as del menÃº (ej.: Entrantes, Bebidas...)
Product
Productos del menÃº asociados a una categorÃ­a
ProductVariant
Variantes (ej.: tamaÃ±o, sabor...) con precios distintos
Order
Pedido realizado por un cliente anÃ³nimo
OrderDetail
Detalle del pedido (productos, cantidades)
OrderStatus
Estado del pedido: pendiente, en preparaciÃ³n, listo, entregado
Translation
Nombre/descripcion por idioma


7. Casos de uso clave
7.1 Cliente
Escanea cÃ³digo QR en su mesa.


Visualiza la carta del restaurante.


Realiza pedido desde su mÃ³vil.


(Opcional) Paga directamente.


Consulta estado del pedido.


7.2 Cocinero
Inicia sesiÃ³n.


Ve pedidos entrantes que requieren preparaciÃ³n.


Marca pedidos como â€œen preparaciÃ³nâ€ o â€œlistoâ€.


7.3 Camarero
Inicia sesiÃ³n.


Ve pedidos que debe entregar.


Marca pedidos como â€œentregadoâ€.


7.4 Administrador de restaurante
Configura la carta y las variantes.


Crea cuentas para empleados.


Supervisa pedidos y mÃ©tricas del establecimiento.


7.5 Administrador general
Crea y gestiona establecimientos.


Asigna administradores.


Accede a vistas globales, KPIs y paneles de auditorÃ­a.



8. Potencial de negocio
Mercado objetivo: RestauraciÃ³n independiente, franquicias, hoteles, eventos.


Escalabilidad: Multi-tenant para gestionar desde 1 hasta miles de establecimientos.


Modelo de ingresos: SaaS mensual, comisiÃ³n por pago en plataforma o por transacciÃ³n, planes con funcionalidades premium.


Valor aÃ±adido: OptimizaciÃ³n de tiempo de atenciÃ³n, reducciÃ³n de errores humanos, autonomÃ­a del cliente, trazabilidad de pedidos, integraciÃ³n con TPV y cocina.


### Tests de integridad

- Verificar que una traducciÃ³n duplicada para el mismo idioma y entidad falla.
- Verificar que no se puede cambiar un pedido de "preparado" a "pendiente".
- Verificar que `deleted_at` no elimina registros en cascada.
- Verificar que `created_by` apunta a un usuario vÃ¡lido.

## AuditorÃ­a y Trazabilidad

- Todas las entidades principales (productos, variantes) incluyen `created_at`, `updated_at` y `created_by`.
- Se conserva historial de cambios en precios y disponibilidad mediante tablas `*_history`.
- Se usan soft deletes con el campo `deleted_at`.

## Rendimiento

- Se han definido Ã­ndices en campos de bÃºsqueda frecuente.
- Se provee una vista `menu_translated` para consultas eficientes del menÃº segÃºn idioma y disponibilidad.

## Validaciones

- CHECK, UNIQUE y FOREIGN KEY garantizan integridad.
- Se definen triggers para actualizar timestamps y almacenar historial.

## RestauraciÃ³n

- Los registros eliminados lÃ³gicamente pueden restaurarse fÃ¡cilmente al dejar `deleted_at` como NULL.



ğŸ§­ Flujo ideal (para UI / lÃ³gica de negocio)
Estado actual
Estado siguiente permitido
pending
preparing, cancelled
preparing
ready, cancelled
ready
delivered, cancelled
delivered
completed
completed
ğŸš« ningÃºn cambio mÃ¡s permitido
cancelled
ğŸš« ningÃºn cambio mÃ¡s permitido


Se detecta el idioma del navegador y se redirige automÃ¡ticamente (ej. a /es, /en, etc.).

Si la detecciÃ³n falla, se muestra una pÃ¡gina en idioma por defecto con opciÃ³n para cambiarlo.


Se instala Heroicons (Recomendado)


. Todos los mÃ³dulos estÃ¡n creados con sus traducciones en inglÃ©s, espaÃ±ol y francÃ©s:

âœ… MÃ³dulos completados:

- base - Traducciones bÃ¡sicas
- auth - AutenticaciÃ³n (login/register)
- navigation - NavegaciÃ³n (navbar, menÃº principal, redirecciones)
- orders - Pedidos (carrito, checkout, confirmaciÃ³n, estados)
- restaurant-menu - MenÃº del restaurante
- admin - AdministraciÃ³n del establecimiento
âœ… Archivos de utilidades:

- types/ - Todas las interfaces TypeScript
- utils/builder.ts - Constructor de traducciones
- index.ts - Punto de entrada principal

Estilos

src/styles/
â”œâ”€â”€ base.css              # Estilos base y variables
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ buttons.css       # Todos los botones unificados
â”‚   â”œâ”€â”€ forms.css         # Formularios y inputs
â”‚   â”œâ”€â”€ navigation.css    # Navbar y navegaciÃ³n
â”‚   â”œâ”€â”€ cards.css         # Tarjetas de productos
â”‚   â”œâ”€â”€ cart.css          # Carrito de compras
â”‚   â””â”€â”€ allergens.css     # AlÃ©rgenos
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ menu.css          # PÃ¡gina del menÃº
â”‚   â”œâ”€â”€ admin.css         # Panel de administraciÃ³n
â”‚   â”œâ”€â”€ login.css         # PÃ¡gina de login
â”‚   â””â”€â”€ checkout.css      # Proceso de compra
â””â”€â”€ utilities.css         # Clases utilitarias


## Beneficios de esta nueva estructura:
âœ… OrganizaciÃ³n modular : Cada archivo tiene un propÃ³sito especÃ­fico
âœ… Mantenibilidad : FÃ¡cil encontrar y modificar estilos especÃ­ficos
âœ… ReutilizaciÃ³n : Variables CSS centralizadas en base.css âœ… Consistencia : DiseÃ±o minimalista unificado en blanco y negro
âœ… Performance : Carga mÃ¡s eficiente y mejor cache
âœ… Escalabilidad : FÃ¡cil agregar nuevos componentes o pÃ¡ginas
